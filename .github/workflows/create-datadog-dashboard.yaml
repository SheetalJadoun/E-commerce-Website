name: create-datadog-dashboard

on:
  push:
    branches:
      - master
  env:
    DATADOG_API_KEY: ${{ secrets.DATADOG_API_KEY }}
    DATADOG_APP_KEY: ${{ secrets.DATADOG_APP_KEY }}
  
  - name: Set up Datadog CLI
  uses: DataDog/datadog-action@v1
  with:
    api-key: ${{ secrets.DATADOG_API_KEY }}
    app-key: ${{ secrets.DATADOG_APP_KEY }}
  
 - name: Create Datadog Dashboard
  run: |
    curl -X POST \
      -H "Content-type: application/json" \
      -H "DD-API-KEY: ${{ secrets.DATADOG_API_KEY }}" \
      -d @E-commerce-Website/template_dashboard.json \
      "https://api.datadoghq.com/api/v1/dashboard?api_key=${{ secrets.DATADOG_API_KEY }}&application_key=${{ secrets.DATADOG_APP_KEY }}"
  



